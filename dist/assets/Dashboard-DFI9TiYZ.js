import{c as E,u as I,r as w,j as e,L}from"./index-BWBdPVw1.js";import{p as U,a as M}from"./api-DgRPd40N.js";import{C as l,a as n,b as c,d as i,c as g}from"./card-B0NHfCRk.js";import{A as B,a as P}from"./alert-Dlt_bX8N.js";import{B as d}from"./badge-Cbp6oXzG.js";import{C}from"./circle-alert-CCsZTkXT.js";import{C as T}from"./credit-card-C19vYvun.js";import{T as m}from"./trending-up-DJJd_C2X.js";import{D as k}from"./dollar-sign-CGSbiRo7.js";import{U as F}from"./users-DL23A3YG.js";import{C as O,a as R}from"./circle-x-yUIy5qkr.js";import{C as o,a as D}from"./clock-DXQ0aj1B.js";import{M as $}from"./map-pin-hPLByw_4.js";import"./js.cookie-Cz0CWeBA.js";import"./index-C5vqZNo1.js";/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],u=E("activity",q),ne=()=>{var N,b,f,y;const{user:h,merchantInfo:z}=I(),[a,p]=w.useState({payments:[],analytics:null,loading:!0,error:null});w.useEffect(()=>{A()},[]);const A=async()=>{var s;try{p(x=>({...x,loading:!0,error:null}));const t=await U.getPayments({limit:10,offset:0}),r=await M.getPaymentMetrics("payments",{time_range:{start_time:new Date(Date.now()-1440*60*1e3).toISOString(),end_time:new Date().toISOString()}});p({payments:((s=t.data)==null?void 0:s.data)||[],analytics:r.data,loading:!1,error:null})}catch(t){console.error("Error cargando datos del dashboard:",t),p(r=>{var x,v;return{...r,loading:!1,error:((v=(x=t.response)==null?void 0:x.data)==null?void 0:v.message)||"Error cargando datos"}})}},j=(s,t="USD")=>{if(!s)return"$0.00";const r=s/100;return new Intl.NumberFormat("es-HN",{style:"currency",currency:t==="HNL"?"HNL":"USD"}).format(r)},S=s=>new Date(s).toLocaleString("es-HN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),_=s=>{switch(s==null?void 0:s.toLowerCase()){case"succeeded":return e.jsx(o,{className:"h-4 w-4 text-green-500"});case"failed":return e.jsx(R,{className:"h-4 w-4 text-red-500"});case"processing":return e.jsx(D,{className:"h-4 w-4 text-yellow-500"});default:return e.jsx(C,{className:"h-4 w-4 text-gray-500"})}},H=s=>{const r={succeeded:{variant:"success",label:"Exitoso"},failed:{variant:"destructive",label:"Fallido"},processing:{variant:"warning",label:"Procesando"},pending:{variant:"secondary",label:"Pendiente"}}[s==null?void 0:s.toLowerCase()]||{variant:"secondary",label:s};return e.jsx(d,{variant:r.variant,className:"text-xs",children:r.label})};return a.loading?e.jsx("div",{className:"p-6 space-y-6 bg-gradient-to-br from-slate-50 via-blue-50 to-purple-50 min-h-screen",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(L,{className:"h-8 w-8 animate-spin text-blue-600"}),e.jsx("span",{className:"text-lg text-gray-600",children:"Cargando datos..."})]})})}):e.jsxs("div",{className:"p-6 space-y-6 bg-gradient-to-br from-slate-50 via-blue-50 to-purple-50 min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-cyan-600 bg-clip-text text-transparent",children:"Dashboard"}),e.jsxs("p",{className:"text-gray-600 mt-2",children:["Bienvenido de nuevo, ",(h==null?void 0:h.name)||"Usuario"]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(d,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{children:"Conectado - Sandbox"})]})}),e.jsx(d,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"Honduras üá≠üá≥"})]})]}),a.error&&e.jsxs(B,{className:"bg-red-50 border-red-200",children:[e.jsx(C,{className:"h-4 w-4"}),e.jsx(P,{className:"text-red-700",children:a.error})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(l,{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105",children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium text-blue-100",children:"Transacciones Hoy"}),e.jsx(T,{className:"h-4 w-4 text-blue-200"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:((N=a.analytics)==null?void 0:N.total_count)||a.payments.length}),e.jsxs("p",{className:"text-xs text-blue-200 flex items-center mt-1",children:[e.jsx(m,{className:"h-3 w-3 mr-1"}),"+12.5% vs per√≠odo anterior"]})]})]}),e.jsxs(l,{className:"bg-gradient-to-br from-emerald-500 to-green-600 text-white border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105",children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium text-green-100",children:"Volumen Total"}),e.jsx(k,{className:"h-4 w-4 text-green-200"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(b=a.analytics)!=null&&b.total_amount?j(a.analytics.total_amount):j(a.payments.reduce((s,t)=>s+(t.amount||0),0))}),e.jsxs("p",{className:"text-xs text-green-200 flex items-center mt-1",children:[e.jsx(m,{className:"h-3 w-3 mr-1"}),"+8.3% vs per√≠odo anterior"]})]})]}),e.jsxs(l,{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105",children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium text-purple-100",children:"Tasa de √âxito"}),e.jsx(u,{className:"h-4 w-4 text-purple-200"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(f=a.analytics)!=null&&f.success_rate?`${a.analytics.success_rate.toFixed(1)}%`:`${(a.payments.filter(s=>s.status==="succeeded").length/a.payments.length*100||0).toFixed(1)}%`}),e.jsxs("p",{className:"text-xs text-purple-200 flex items-center mt-1",children:[e.jsx(m,{className:"h-3 w-3 mr-1"}),"+0.8% vs per√≠odo anterior"]})]})]}),e.jsxs(l,{className:"bg-gradient-to-br from-cyan-500 to-blue-600 text-white border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105",children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium text-cyan-100",children:"Conectores Activos"}),e.jsx(F,{className:"h-4 w-4 text-cyan-200"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:((y=a.analytics)==null?void 0:y.active_connectors)||8}),e.jsxs("p",{className:"text-xs text-cyan-200 flex items-center mt-1",children:[e.jsx(m,{className:"h-3 w-3 mr-1"}),"+9.7% vs per√≠odo anterior"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(l,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg",children:[e.jsxs(n,{children:[e.jsxs(c,{className:"text-xl font-bold text-gray-800 flex items-center space-x-2",children:[e.jsx(u,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:"Actividad Reciente"})]}),e.jsx(g,{children:"√öltimas transacciones procesadas en Honduras"})]}),e.jsx(i,{children:e.jsx("div",{className:"space-y-4",children:a.payments.length>0?a.payments.slice(0,5).map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[_(s.status),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:s.payment_id||`pay_HN00${t+1}`}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(O,{className:"h-3 w-3"}),e.jsx("span",{children:S(s.created||new Date().toISOString())})]}),s.customer_email&&e.jsx("p",{className:"text-xs text-gray-500",children:s.customer_email})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-gray-800",children:j(s.amount,s.currency)}),H(s.status)]})]},s.payment_id||t)):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(u,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No hay transacciones recientes"}),e.jsx("p",{className:"text-sm",children:"Las transacciones aparecer√°n aqu√≠ cuando se procesen"})]})})})]}),e.jsxs(l,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg",children:[e.jsxs(n,{children:[e.jsxs(c,{className:"text-xl font-bold text-gray-800 flex items-center space-x-2",children:[e.jsx(o,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{children:"Estado del Sistema"})]}),e.jsx(g,{children:"Monitoreo de conectores y servicios"})]}),e.jsx(i,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(o,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:"FICOHSA"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Uptime: 99.9%"})]})]}),e.jsx(d,{variant:"success",children:"Activo"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(o,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:"Banco Atl√°ntida"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Uptime: 98.7%"})]})]}),e.jsx(d,{variant:"success",children:"Activo"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(o,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:"Tigo Money"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Uptime: 97.2%"})]})]}),e.jsx(d,{variant:"success",children:"Activo"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(D,{className:"h-5 w-5 text-yellow-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:"ENEE"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Uptime: 95.1%"})]})]}),e.jsx(d,{variant:"warning",children:"Mantenimiento"})]})]})})]})]}),e.jsxs(l,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg",children:[e.jsxs(n,{children:[e.jsxs(c,{className:"text-xl font-bold text-gray-800 flex items-center space-x-2",children:[e.jsx($,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:"Cobertura Honduras"})]}),e.jsx(g,{children:"Servicios disponibles en todo el territorio nacional"})]}),e.jsx(i,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"font-bold text-blue-600",children:"18"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Departamentos"})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsx("p",{className:"font-bold text-green-600",children:"298"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Municipios"})]}),e.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[e.jsx("p",{className:"font-bold text-purple-600",children:"8"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Bancos Conectados"})]}),e.jsxs("div",{className:"text-center p-3 bg-cyan-50 rounded-lg",children:[e.jsx("p",{className:"font-bold text-cyan-600",children:"24/7"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Disponibilidad"})]})]})})]})]})};export{ne as default};

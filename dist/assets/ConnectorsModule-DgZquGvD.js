import{r,j as e}from"./index-BWBdPVw1.js";import{u as O,d as M,a as P,V as j}from"./useApiMethods-jYtKOT82.js";const R=[{id:"stripe",name:"Stripe",logo:"/hyperswitch/Gateway/STRIPE.svg",type:"payment_processor"},{id:"adyen",name:"Adyen",logo:"/hyperswitch/Gateway/ADYEN.svg",type:"payment_processor"},{id:"paypal",name:"PayPal",logo:"/hyperswitch/Gateway/PAYPAL.svg",type:"payment_processor"},{id:"square",name:"Square",logo:"/hyperswitch/Gateway/SQUARE.svg",type:"payment_processor"},{id:"braintree",name:"Braintree",logo:"/hyperswitch/Gateway/BRAINTREE.svg",type:"payment_processor"},{id:"checkout",name:"Checkout.com",logo:"/hyperswitch/Gateway/CHECKOUT.svg",type:"payment_processor"},{id:"worldpay",name:"Worldpay",logo:"/hyperswitch/Gateway/WORLDPAY.svg",type:"payment_processor"},{id:"cybersource",name:"Cybersource",logo:"/hyperswitch/Gateway/CYBERSOURCE.svg",type:"payment_processor"},{id:"authorize_net",name:"Authorize.Net",logo:"/hyperswitch/Gateway/AUTHORIZEDOTNET.svg",type:"payment_processor"},{id:"mollie",name:"Mollie",logo:"/hyperswitch/Gateway/MOLLIE.svg",type:"payment_processor"}],U=()=>{const{getMethod:d,loading:v,error:m}=O(),{updateMethod:x,loading:h,error:u}=M(),{buildUrl:o}=P(),[g,k]=r.useState([]),[n,p]=r.useState(null),[E,y]=r.useState(!1),[c,N]=r.useState({}),l=r.useCallback(async()=>{try{const s=o(j.V2_CONNECTOR,{methodType:"GET"}),t=await d(s);t&&t.data&&k(t.data)}catch(s){console.error("Error loading connectors:",s)}},[d,o]);r.useEffect(()=>{l()},[l]);const w=r.useCallback(async s=>{try{const t=o(j.V2_CONNECTOR,{methodType:"GET",id:s}),a=await d(t);p(a)}catch(t){console.error("Error loading connector details:",t)}},[d,o]),S=r.useCallback(async s=>{try{const t=o(j.V2_CONNECTOR,{methodType:"POST"});await x(t,{bodyStr:JSON.stringify(s),contentType:"application/json"})&&(await l(),y(!1),N({}))}catch(t){console.error("Error configuring connector:",t)}},[x,o,l]),C=r.useCallback(async(s,t)=>{try{const a=o(j.V2_CONNECTOR,{methodType:"PUT",id:s});await x(a,{bodyStr:JSON.stringify(t),contentType:"application/json"})&&(await l(),p(null))}catch(a){console.error("Error updating connector:",a)}},[x,o,l]),_=r.useCallback(async(s,t)=>{try{await C(s,{status:t==="active"?"inactive":"active"})}catch(a){console.error("Error toggling connector status:",a)}},[C]),T=s=>{N({connector_name:s.id,connector_type:s.type,business_country:"US",business_label:"",connector_label:"",test_mode:!0,disabled:!1,payment_methods_enabled:[],metadata:{},connector_account_details:{}}),y(!0)},b=(s,t)=>{N(a=>({...a,[s]:t}))},A=s=>{s.preventDefault(),S(c)},f=s=>{const t={active:"text-green-600 bg-green-100",inactive:"text-red-600 bg-red-100",pending:"text-yellow-600 bg-yellow-100"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t[s]||"text-gray-600 bg-gray-100"}`,children:(s==null?void 0:s.toUpperCase())||"UNKNOWN"})};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Conectores de Pago"}),e.jsx("p",{className:"text-gray-600",children:"Configura y gestiona los procesadores de pago"})]}),e.jsx("button",{onClick:l,disabled:v,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:v?"Cargando...":"Actualizar"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow border",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Conectores Disponibles"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:R.map(s=>{const t=g.some(i=>i.connector_name===s.id),a=g.find(i=>i.connector_name===s.id);return e.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("img",{src:s.logo,alt:s.name,className:"w-8 h-8 object-contain",onError:i=>{i.target.style.display="none"}}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.type.replace("_"," ")})]})]}),t?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Estado:"}),f(a.status)]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>w(a.merchant_connector_id),className:"flex-1 px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Ver Detalles"}),e.jsx("button",{onClick:()=>_(a.merchant_connector_id,a.status),disabled:h,className:`flex-1 px-3 py-1 text-sm rounded ${a.status==="active"?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:a.status==="active"?"Desactivar":"Activar"})]})]}):e.jsx("button",{onClick:()=>T(s),className:"w-full px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Configurar"})]},s.id)})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow border",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Conectores Configurados"}),g.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay conectores configurados"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Conector"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Etiqueta"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Modo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.connector_name})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f(s.status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.connector_label||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.test_mode?"Test":"Producción"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[e.jsx("button",{onClick:()=>w(s.merchant_connector_id),className:"text-blue-600 hover:text-blue-900",children:"Ver Detalles"}),e.jsx("button",{onClick:()=>_(s.merchant_connector_id,s.status),disabled:h,className:`${s.status==="active"?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"}`,children:s.status==="active"?"Desactivar":"Activar"})]})]},s.merchant_connector_id))})]})})]})}),E&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:e.jsxs("form",{onSubmit:A,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Configurar Conector: ",c.connector_name]}),e.jsx("button",{type:"button",onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Etiqueta del Negocio"}),e.jsx("input",{type:"text",value:c.business_label,onChange:s=>b("business_label",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Etiqueta del Conector"}),e.jsx("input",{type:"text",value:c.connector_label,onChange:s=>b("connector_label",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"País del Negocio"}),e.jsxs("select",{value:c.business_country,onChange:s=>b("business_country",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"US",children:"Estados Unidos"}),e.jsx("option",{value:"CO",children:"Colombia"}),e.jsx("option",{value:"MX",children:"México"}),e.jsx("option",{value:"BR",children:"Brasil"}),e.jsx("option",{value:"AR",children:"Argentina"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"test_mode",checked:c.test_mode,onChange:s=>b("test_mode",s.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"test_mode",className:"ml-2 block text-sm text-gray-900",children:"Modo de Prueba"})]})]}),e.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>y(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:h,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:h?"Configurando...":"Configurar"})]})]})})}),n&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Detalles del Conector: ",n.connector_name]}),e.jsx("button",{onClick:()=>p(null),className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Estado"}),e.jsx("div",{className:"mt-1",children:f(n.status)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Modo"}),e.jsx("div",{className:"mt-1",children:n.test_mode?"Prueba":"Producción"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Etiqueta del Negocio"}),e.jsx("div",{className:"mt-1",children:n.business_label||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Etiqueta del Conector"}),e.jsx("div",{className:"mt-1",children:n.connector_label||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"País del Negocio"}),e.jsx("div",{className:"mt-1",children:n.business_country||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"ID del Conector"}),e.jsx("div",{className:"mt-1 text-xs font-mono",children:n.merchant_connector_id})]})]})}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>p(null),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400",children:"Cerrar"})})]})}),(m||u)&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:e.jsx("div",{className:"flex",children:e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),e.jsx("div",{className:"mt-2 text-sm text-red-700",children:(m==null?void 0:m.message)||(u==null?void 0:u.message)||"Ocurrió un error"})]})})})]})};export{U as default};
